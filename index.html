<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MQDH</title>

<link href="https://fonts.googleapis.com/css2?family=Liberation+Sans:wght@400;700&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#0e0e0e;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Liberation Sans",system-ui,sans-serif;
  color:#fff;
  text-transform:uppercase;
  overflow:hidden;
}

#sky{
  position:absolute;
  inset:0;
  z-index:0;
}

.star{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  opacity:.85;
  cursor:pointer;
  animation: twinkle 4s infinite ease-in-out;
}

@keyframes twinkle{
  0%,100%{opacity:.9}
  50%{opacity:.4}
}

.texto{
  position:relative;
  z-index:2;
  display:flex;
  align-items:flex-end;
  font-weight:700;
  letter-spacing:-0.08em;
  user-select:none;
}

.texto.cambiado{
  font-size:clamp(1.2rem,4vw,2.3rem);
  letter-spacing:.08em;
  flex-wrap:wrap;
  text-align:center;
}

.texto span{
  cursor:pointer;
  transition:color .15s,transform .15s,opacity .3s;
  line-height:1;
}

.blink{animation:blink 1.2s infinite}

@keyframes blink{
  0%,100%{opacity:1}
  50%{opacity:.35}
}

.m{font-size:clamp(3rem,8vw,4rem)}
.q{font-size:clamp(5rem,14vw,7rem)}
.d{font-size:clamp(5rem,14vw,7rem)}
.h{font-size:clamp(3rem,8vw,4rem)}

input.hidden{
  position:fixed;
  opacity:0;
  pointer-events:none;
}
</style>
</head>

<body>
<div id="sky"></div>

<div class="texto" id="logo">
  <span class="m" data-letter="m">M</span>
  <span class="q" data-letter="q">Q</span>
  <span class="d" data-letter="d">D</span>
  <span class="h" data-letter="h">H</span>
</div>

<input id="hiddenInput" class="hidden" autocomplete="off">

<script>
const logo = document.getElementById('logo');
const sky = document.getElementById('sky');
const input = document.getElementById('hiddenInput');

const combinaciones = {
  punk:{text:"CERCA PERO NO HABRA AQUI.",colors:["#ff6b6b","#c44536","#f19066"]},
  trap:{text:"HABRA UNA.",colors:["#54a0ff","#2e86de","#341f97"]},
  acustica:{text:"NO SE DE SENTIMIENTOS PERO SI.",colors:["#feca57","#ff9f43","#fff3cd"]},
  fusion:{text:"SERA LO MEJOR DE LO MEJOR.",colors:["#5f27cd","#1dd1a1","#48dbfb"]},
  regueton:{text:"TU SABES QUE SI.",colors:["#ee5253","#f368e0","#ff9ff3"]},
  "que es":{text:"UN ALBUM PUEH.",colors:["#c8d6e5","#8395a7","#576574"]},
  jazz:{text:"ME CONOCES BIEN, GRACIAS :)",colors:["#f5f6fa","#c23616","#2f3640"]},
  electronica:{text:"MAYORMENTE LO TIENE.",colors:["#00d2d3","#01a3a4","#222f3e"]},
  guitarra:{text:"NO ME GUSTA PARA NADA, ASI QUE NO HABRA.",colors:["#b71540","#6F1E51","#130f40"]},
  percusion:{text:"COMO SIEMPRE UNA.",colors:["#f0932b","#eb4d4b","#4834d4"]},
  pop:{text:"QUIERO SERLO PERO ME AGRADA SER COMO SOY, ENTIENDES VERDAD?",colors:["#ff9ff3","#feca57","#48dbfb"]}
};

let bufferClick=[];
let bufferKey="";

function saveStar(key){
  const stars=JSON.parse(localStorage.getItem("mqdh-stars")||"[]");
  if(stars.find(s=>s.key===key)) return;
  stars.push({
    key,
    x:Math.random()*100,
    y:Math.random()*100
  });
  localStorage.setItem("mqdh-stars",JSON.stringify(stars));
  drawStars();
}

function drawStars(){
  sky.innerHTML="";
  const stars=JSON.parse(localStorage.getItem("mqdh-stars")||"[]");
  stars.forEach(s=>{
    const star=document.createElement("div");
    star.className="star";
    star.style.left=s.x+"%";
    star.style.top=s.y+"%";
    star.style.background=combinaciones[s.key].colors[0];
    star.onclick=()=>cambiarTexto(combinaciones[s.key].text,s.key);
    sky.appendChild(star);
  });
}

function cambiarTexto(text,key){
  logo.classList.add("cambiado");
  logo.innerHTML="";
  text.split("").forEach(c=>{
    const s=document.createElement("span");
    s.textContent=c===" "?" ":c;
    s.style.color=randomColor(key);
    if(c===".") s.classList.add("blink");
    logo.appendChild(s);
  });
  if(key) saveStar(key);
}

function volverInicio(){
  logo.classList.remove("cambiado");
  logo.innerHTML=`
    <span class="m" data-letter="m">M</span>
    <span class="q" data-letter="q">Q</span>
    <span class="d" data-letter="d">D</span>
    <span class="h" data-letter="h">H</span>
  `;
}

function randomColor(key){
  const c=combinaciones[key]?.colors||["#fff"];
  return c[Math.floor(Math.random()*c.length)];
}

logo.addEventListener("click",e=>{
  const v=e.target.dataset?.letter;
  if(!v) return;
  bufferClick.push(v);
  if(bufferClick.join("").endsWith("chat")){
    input.focus();
    bufferClick=[];
  }
  if(v===".") volverInicio();
});

input.addEventListener("input",()=>{
  bufferKey+=input.value.toLowerCase();
  input.value="";
  Object.keys(combinaciones).forEach(k=>{
    if(bufferKey.endsWith(k)){
      cambiarTexto(combinaciones[k].text,k);
      bufferKey="";
      input.blur();
    }
  });
});

drawStars();
</script>
</body>
</html>
